!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactAmplitude=t(require("react")):e.ReactAmplitude=t(e.React)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){e.exports=n(8)()},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=r(n(6)),h=r(n(0)),m=r(n(1)),g=r(n(3)),O=n(10),P=n(4),_=function(e){function t(e){var n;return c(this,t),n=l(this,s(t).call(this,e)),v(p(n),"_makeLogEvent",function(){return function(e,t,r){var o=n.getAmplitudeInstance();o&&o.logEvent(e,u({},n.getAmplitudeEventProperties(),{},t||{}),r)}}),v(p(n),"instrument",(0,O.memoize)(function(e,t){return function(){var r=t?t.apply(void 0,arguments):void 0;return n.logEvent(e),r}})),v(p(n),"getAmplitudeInstance",function(){var e=p(n),t=e.context,r=e.props;if(!t.getAmplitudeInstance)return null;var o=t.getAmplitudeInstance(r.instanceName);return(0,P.isValidAmplitudeInstance)(o)?o:(console.error('Failed to get a valid Amplitude instance. This likely means the "amplitudeInstance" prop your provided to the AmplitudeProvider component is not a valid Amplitude instance.'),null)}),v(p(n),"getAmplitudeEventProperties",function(){var e=p(n),t=e.props,r=e.context;if(!r.getAmplitudeEventProperties)return t.eventProperties;var o=r.getAmplitudeEventProperties();return"function"==typeof t.eventProperties?t.eventProperties(o):u({},o,{},t.eventProperties)}),n.logEvent="number"==typeof e.debounceInterval?(0,b.default)(n._makeLogEvent(),e.debounceInterval):n._makeLogEvent(),n._renderPropParams={logEvent:n.logEvent,instrument:n.instrument},n}return d(t,e),f(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props;"number"==typeof e.debounceInterval?t.debounceInterval!==e.debounceInterval&&(this.logEvent=(0,b.default)(this._makeLogEvent(),e.debounceInterval),this._renderPropParams=u({},this._renderPropParams,{logEvent:this.logEvent})):"number"==typeof t.debounceInterval&&(this.logEvent=this._makeLogEvent(),this._renderPropParams=u({},this._renderPropParams,{logEvent:this.logEvent}))}},{key:"componentDidMount",value:function(){var e=this.props,t=this.getAmplitudeInstance();t&&e.userProperties&&t.setUserProperties(e.userProperties)}},{key:"componentDidUpdate",value:function(e){this.instrument.cache.garbageCollect();var t=this.props,n=this.getAmplitudeInstance();n&&!(0,g.default)(e.userProperties,t.userProperties)&&n.setUserProperties(t.userProperties)}},{key:"getChildContext",value:function(){return{getAmplitudeEventProperties:this.getAmplitudeEventProperties}}},{key:"render",value:function(){var e=this.props;return"function"==typeof e.children?e.children(this._renderPropParams):e.children||null}}]),t}(m.default.Component);_.propTypes={children:h.default.oneOfType([h.default.node,h.default.func]),eventProperties:h.default.oneOfType([h.default.object,h.default.func]),debounceInterval:h.default.number,instanceName:h.default.string,userProperties:h.default.object},_.contextTypes={getAmplitudeInstance:h.default.func,getAmplitudeEventProperties:h.default.func},_.childContextTypes={getAmplitudeEventProperties:h.default.func},t.default=_},function(e,t){e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),c=0;i.length>c;c++){var a=i[c];if(!u(a))return!1;var f=e[a],l=t[a];if(!1===(o=n?n.call(r,f,l,a):void 0)||void 0===o&&f!==l)return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidAmplitudeInstance=void 0,t.isValidAmplitudeInstance=function(e){return!!e&&"function"==typeof e.init&&"function"==typeof e.logEvent}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Amplitude",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"AmplitudeProvider",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"LogOnChange",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"LogOnMount",{enumerable:!0,get:function(){return c.default}});var o=r(n(2)),i=r(n(11)),u=r(n(12)),c=r(n(13))},function(e,t,n){(function(t){function n(e,t,n){function o(t){var n=v,r=b;return v=b=void 0,w=t,m=e.apply(r,n)}function i(e){return w=e,g=setTimeout(l,t),E?o(e):m}function a(e){var n=e-j,r=e-w,o=t-n;return A?P(o,h-r):o}function f(e){var n=e-j,r=e-w;return void 0===j||n>=t||0>n||A&&r>=h}function l(){var e=_();if(f(e))return s(e);g=setTimeout(l,a(e))}function s(e){return g=void 0,I&&v?o(e):(v=b=void 0,m)}function p(){void 0!==g&&clearTimeout(g),w=0,v=j=b=g=void 0}function d(){return void 0===g?m:s(_())}function y(){var e=_(),n=f(e);if(v=arguments,b=this,j=e,n){if(void 0===g)return i(j);if(A)return g=setTimeout(l,t),o(j)}return void 0===g&&(g=setTimeout(l,t)),m}var v,b,h,m,g,j,w=0,E=!1,A=!1,I=!0;if("function"!=typeof e)throw new TypeError(c);return t=u(t)||0,r(n)&&(E=!!n.leading,A="maxWait"in n,h=A?O(u(n.maxWait)||0,t):h,I="trailing"in n?!!n.trailing:I),y.cancel=p,y.flush=d,y}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function i(e){return"symbol"==typeof e||o(e)&&g.call(e)==f}function u(e){if("number"==typeof e)return e;if(i(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=p.test(e);return n||d.test(e)?y(e.slice(2),n?2:8):s.test(e)?a:+e}var c="Expected a function",a=NaN,f="[object Symbol]",l=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,y=parseInt,v="object"==typeof t&&t&&t.Object===Object&&t,b="object"==typeof self&&self&&self.Object===Object&&self,h=v||b||Function("return this")(),m=Object.prototype,g=m.toString,O=Math.max,P=Math.min,_=function(){return h.Date.now()};e.exports=n}).call(t,n(7))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(){}function o(){}var i=n(9);o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,u){if(u!==i){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return u(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=void 0;var l=function(){function e(t){c(this,e),this.children=new Map,this.value=t,this.referenceCount=0}return f(e,[{key:"set",value:function(t,n){if(!Array.isArray(t))return this.children.set(t,n);if(1===t.length)return this.children.set(t[0],new e(n));var r=this.children.get(t[0]);r||(r=new e,this.children.set(t[0],r)),r.set(t.slice(1),n)}},{key:"get",value:function(e){if(Array.isArray(e)){if(0===e.length)return this.referenceCount+=1,this.value;var t=this.children.get(e[0]);return t?t.get(e.slice(1)):void 0}return this.children.get(e)}},{key:"has",value:function(e){if(Array.isArray(e)){if(0===e.length)return!0;var t=this.children.get(e[0]);return!!t&&t.has(e.slice(1))}return this.children.has(e)}},{key:"delete",value:function(e){if(!Array.isArray(e))return this.children.delete(e);if(0===e.length)return!0;var t=this.children.get(e[0]);return!!t&&(t.delete(e.slice(1))&&this.children.delete(e[0]),0===this.children.size||void 0)}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===this.children.size?e(this,t):this.children.forEach(function(n,o){n.traverse(e,[].concat(r(t),[o]))})}},{key:"garbageCollect",value:function(){var e=this;this.traverse(function(t,n){0===t.referenceCount&&0===t.children.size?e.delete(n):t.referenceCount=0})}}]),e}();t.memoize=function(e){var t=new l,n=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];if(!t.has(r)){var i=e.apply(void 0,r);t.set(r,i)}return t.get(r)};return n.cache=t,n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=r(n(0)),y=r(n(1)),v=n(4),b=function(e){function t(){return i(this,t),a(this,l(t).apply(this,arguments))}return s(t,e),c(t,[{key:"componentWillMount",value:function(){var e=this.props;(0,v.isValidAmplitudeInstance)(e.amplitudeInstance)?(e.apiKey&&(e.deviceId?e.amplitudeInstance.init(e.apiKey,null,{deviceId:e.deviceId}):e.amplitudeInstance.init(e.apiKey)),e.userId&&e.amplitudeInstance.setUserId(e.userId)):console.error('AmplitudeProvider was not provided with a valid "amplitudeInstance" prop.')}},{key:"getChildContext",value:function(){var e=this.context,t=this.props;return{getAmplitudeInstance:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$default_instance";return t.amplitudeInstance._instanceName===n?t.amplitudeInstance:e.getAmplitudeInstance?e.getAmplitudeInstance(n):null},getAmplitudeEventProperties:function(){return t.eventProperties||{}}}}},{key:"render",value:function(){return this.props.children}}]),t}(y.default.Component);b.propTypes={amplitudeInstance:d.default.object.isRequired,apiKey:d.default.string,userId:d.default.string,deviceId:d.default.string},b.contextTypes={getAmplitudeInstance:d.default.func},b.childContextTypes={getAmplitudeInstance:d.default.func,getAmplitudeEventProperties:d.default.func},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=r(n(0)),v=r(n(1)),b=r(n(3)),h=r(n(2)),m=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=Array(r),u=0;r>u;u++)o[u]=arguments[u];return n=a(this,(e=f(t)).call.apply(e,[this].concat(o))),d(l(n),"_amplitudeRef",null),d(l(n),"setRef",function(e){n._amplitudeRef=e}),n}return s(t,e),c(t,[{key:"componentDidUpdate",value:function(e){var t=this.props;(0,b.default)(e.value,t.value)||this._amplitudeRef&&this._amplitudeRef.logEvent(t.eventType)}},{key:"render",value:function(){var e=this.props;return v.default.createElement(h.default,{ref:this.setRef,debounceInterval:e.debounceInterval,instanceName:e.instanceName,eventProperties:e.eventProperties},e.children)}}]),t}(v.default.Component);m.propTypes={debounceInterval:y.default.number,eventProperties:y.default.oneOfType([y.default.object,y.default.func]),eventType:y.default.string.isRequired,instanceName:y.default.string,value:y.default.any},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=r(n(0)),v=r(n(1)),b=r(n(2)),h=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=Array(r),u=0;r>u;u++)o[u]=arguments[u];return n=a(this,(e=f(t)).call.apply(e,[this].concat(o))),d(l(n),"_amplitudeRef",null),d(l(n),"setRef",function(e){n._amplitudeRef=e}),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props;this._amplitudeRef&&this._amplitudeRef.logEvent(e.eventType)}},{key:"render",value:function(){var e=this.props;return v.default.createElement(b.default,{ref:this.setRef,instanceName:e.instanceName,eventProperties:e.eventProperties},e.children)}}]),t}(v.default.Component);h.propTypes={eventProperties:y.default.oneOfType([y.default.object,y.default.func]),eventType:y.default.string.isRequired,instanceName:y.default.string},t.default=h}])});